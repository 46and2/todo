(function(t){function o(o){for(var n,d,s=o[0],a=o[1],u=o[2],l=0,p=[];l<s.length;l++)d=s[l],Object.prototype.hasOwnProperty.call(r,d)&&r[d]&&p.push(r[d][0]),r[d]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);c&&c(o);while(p.length)p.shift()();return i.push.apply(i,u||[]),e()}function e(){for(var t,o=0;o<i.length;o++){for(var e=i[o],n=!0,s=1;s<e.length;s++){var a=e[s];0!==r[a]&&(n=!1)}n&&(i.splice(o--,1),t=d(d.s=e[0]))}return t}var n={},r={app:0},i=[];function d(o){if(n[o])return n[o].exports;var e=n[o]={i:o,l:!1,exports:{}};return t[o].call(e.exports,e,e.exports,d),e.l=!0,e.exports}d.m=t,d.c=n,d.d=function(t,o,e){d.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:e})},d.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},d.t=function(t,o){if(1&o&&(t=d(t)),8&o)return t;if(4&o&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(d.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var n in t)d.d(e,n,function(o){return t[o]}.bind(null,n));return e},d.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return d.d(o,"a",o),o},d.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},d.p="/todo/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],a=s.push.bind(s);s.push=o,s=s.slice();for(var u=0;u<s.length;u++)o(s[u]);var c=a;i.push([0,"chunk-vendors"]),e()})({0:function(t,o,e){t.exports=e("56d7")},"034f":function(t,o,e){"use strict";var n=e("85ec"),r=e.n(n);r.a},"43db":function(t,o,e){"use strict";var n=e("6c43"),r=e.n(n);r.a},"56d7":function(t,o,e){"use strict";e.r(o),e.d(o,"eventBus",(function(){return N}));e("e260"),e("e6cf"),e("cca6"),e("a79d");var n=e("2b0e"),r=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{attrs:{id:"app"}},[e("todo-list")],1)},i=[],d=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("section",{on:{dragover:function(t){t.preventDefault()},drop:function(o){return o.preventDefault(),t.drop(o)}}},[e("div",{staticClass:"container"},[e("h1",[t._v("Todo list")]),e("div",{staticClass:"add-items"},[e("div",{staticClass:"add-control add-todo"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newTodo,expression:"newTodo"}],staticClass:"add-title new-todo-title",attrs:{type:"text",placeholder:"Добавить задачу"},domProps:{value:t.newTodo},on:{keyup:function(o){return!o.type.indexOf("key")&&t._k(o.keyCode,"enter",13,o.key,"Enter")?null:t.handleAdding(o)},input:function(o){o.target.composing||(t.newTodo=o.target.value)}}}),e("button",{staticClass:"add-button add-todo-button",on:{click:t.handleAdding}},[t._v(" + ")])]),e("div",{staticClass:"add-control add-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newGroup,expression:"newGroup"}],staticClass:"add-title new-group-title",attrs:{type:"text",placeholder:"Добавить группу задач"},domProps:{value:t.newGroup},on:{keyup:function(o){return!o.type.indexOf("key")&&t._k(o.keyCode,"enter",13,o.key,"Enter")?null:t.addGroup(o)},input:function(o){o.target.composing||(t.newGroup=o.target.value)}}}),e("button",{staticClass:"add-button add-group-button",on:{click:t.addGroup}},[t._v(" + ")])])]),e("div",{staticClass:"filters"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.titleFilter,expression:"titleFilter"}],staticClass:"title-filter",attrs:{type:"text",placeholder:"Фильтр по задачам"},domProps:{value:t.titleFilter},on:{input:function(o){o.target.composing||(t.titleFilter=o.target.value)}}}),e("div",{staticClass:"status-filters"},[e("button",{staticClass:"status-filter-toggle toggle-all",class:{"filter-active":"all"===t.statusFilter},on:{click:function(o){t.statusFilter="all"}}},[t._v(" Все ")]),e("button",{staticClass:"status-filter-toggle toggle-completed",class:{"filter-active":"completed"===t.statusFilter},on:{click:function(o){t.statusFilter="completed"}}},[t._v(" Завершенные ")]),e("button",{staticClass:"status-filter-toggle toggle-active",class:{"filter-active":"active"===t.statusFilter},on:{click:function(o){t.statusFilter="active"}}},[t._v(" Активные ")])])]),e("div",{staticClass:"main-list"},[t._l(t.todoList.groups,(function(o){return e("todo-group",{key:"group_"+o.id,attrs:{group:o,todos:t.filteredTodos}})})),t._l(t.commonTodos,(function(t){return e("todo-item",{key:"todo_"+t.id,attrs:{todo:t}})})),t.commonTodos.length||t.todoList.groups.length?t._e():e("p",[t._v(" Нет задач по текущим фильтрам... ")])],2)])])},s=[],a=(e("4de4"),e("c740"),e("caad"),e("c975"),e("d81d"),e("a434"),e("d3b7"),e("25f0"),e("2532"),e("498a"),e("5530")),u=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"todo-group",style:t.groupStyle,on:{dragover:function(t){t.preventDefault()},drop:function(o){return o.preventDefault(),o.stopPropagation(),t.drop(o)}}},[e("div",{staticClass:"group-header"},[e("h2",[t._v(t._s(t.group.title))]),e("button",{staticClass:"remove-group",on:{click:function(o){t.showModal=!0}}},[t._v("×")])]),e("div",{staticClass:"group-controls"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newGroupedTodo,expression:"newGroupedTodo"}],staticClass:"group-new-todo-title",attrs:{type:"text",placeholder:"Добавить задачу"},domProps:{value:t.newGroupedTodo},on:{keyup:function(o){return!o.type.indexOf("key")&&t._k(o.keyCode,"enter",13,o.key,"Enter")?null:t.addGroupedTodo(o)},input:function(o){o.target.composing||(t.newGroupedTodo=o.target.value)}}}),e("button",{staticClass:"add-grouped-todo",on:{click:t.addGroupedTodo}},[t._v("+")])]),e("div",{staticClass:"group-todos"},[t._l(t.currentGroupTodos,(function(t){return e("todo-item",{key:"todo_"+t.id,attrs:{todo:t}})})),t.currentGroupTodos.length?t._e():e("p",[t._v("Пусто...")])],2),t.showModal?e("confirmation-modal",{attrs:{text:"Удалить группу?"},on:{confirmed:t.remove,rejected:function(o){t.showModal=!1}}}):t._e()],1)},c=[],l=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"modal-mask"},[e("div",{staticClass:"modal-wrapper"},[e("div",{staticClass:"confirmation-modal"},[e("p",{staticClass:"confirmation-text"},[t._v(t._s(t.text))]),e("div",{staticClass:"modal-controls"},[e("button",{staticClass:"modal-button confirm-button",on:{click:t.confirm}},[t._v(" OK ")]),e("button",{staticClass:"modal-button reject-button",on:{click:t.reject}},[t._v(" Отмена ")])])])])])},p=[],f={name:"ConfirmationModal",props:{text:{type:String,required:!0}},methods:{confirm:function(){this.$emit("confirmed")},reject:function(){this.$emit("rejected")}}},m=f,v=(e("bc58"),e("2877")),g=Object(v["a"])(m,l,p,!1,null,"8513f3f4",null),h=g.exports,b=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"todo-wrapper"},[e("div",{staticClass:"todo",attrs:{draggable:"true"},on:{dragover:function(t){t.stopPropagation()},dragstart:t.dragStart}},[e("div",{staticClass:"todo-left"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.completed,expression:"completed"}],staticClass:"todo-status",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.completed)?t._i(t.completed,null)>-1:t.completed},on:{change:[function(o){var e=t.completed,n=o.target,r=!!n.checked;if(Array.isArray(e)){var i=null,d=t._i(e,i);n.checked?d<0&&(t.completed=e.concat([i])):d>-1&&(t.completed=e.slice(0,d).concat(e.slice(d+1)))}else t.completed=r},t.toggleCompleted]}}),e("p",{staticClass:"todo-title",class:{completed:t.completed}},[t._v(" "+t._s(t.todo.title)+" ")])]),e("button",{staticClass:"remove-todo",on:{click:function(o){t.showModal=!0}}},[t._v("×")])]),t.showModal?e("confirmation-modal",{attrs:{text:"Удалить задачу?"},on:{confirmed:t.remove,rejected:function(o){t.showModal=!1}}}):t._e()],1)},w=[],y={name:"TodoItem",components:{ConfirmationModal:h},props:{todo:{type:Object,required:!0}},data:function(){return{showModal:!1,completed:this.todo.completed}},methods:{toggleCompleted:function(){N.$emit("todo-complete-toggled",{id:this.todo.id,completed:this.completed})},remove:function(){this.showModal=!1,N.$emit("todo-removed",this.todo.id)},dragStart:function(t){t.dataTransfer.setData("text",this.todo.id)}}},_=y,T=(e("43db"),Object(v["a"])(_,b,w,!1,null,"2c25a8be",null)),C=T.exports,k={name:"TodoGroup",components:{ConfirmationModal:h,TodoItem:C},props:{group:{type:Object,required:!0},todos:{type:Array,required:!0}},data:function(){return{showModal:!1,showTodoForm:!1,newGroupedTodo:""}},computed:{currentGroupTodos:function(){var t=this;return this.todos.filter((function(o){return o.groupId===t.group.id}))},groupStyle:function(){return{"--group-color":this.group.color}}},methods:{addGroupedTodo:function(){N.$emit("grouped-todo-added",{title:this.newGroupedTodo,groupId:this.group.id}),this.newGroupedTodo=""},remove:function(){this.showModal=!1,N.$emit("group-removed",this.group.id)},drop:function(t){var o=t.dataTransfer.getData("text");N.$emit("todo-group-changed",{todoId:+o,groupId:this.group.id})}}},x=k,G=(e("c7b9"),Object(v["a"])(x,u,c,!1,null,"654149cc",null)),O=G.exports,j="todo-list-vue",L={fetch:function(){return JSON.parse(localStorage.getItem(j)||'{"todos":[], "groups":[]}')},save:function(t){localStorage.setItem(j,JSON.stringify(t))}},I={all:function(t){return t},completed:function(t){return t.filter((function(t){return t.completed}))},active:function(t){return t.filter((function(t){return!t.completed}))}},M={name:"TodoList",components:{TodoGroup:O,TodoItem:C},data:function(){return{newTodo:"",newGroup:"",statusFilter:"all",titleFilter:"",todoList:L.fetch()}},watch:{todoList:{handler:function(t){L.save(t)},deep:!0}},computed:{filteredTodos:function(){var t=this,o=I[this.statusFilter](this.todoList.todos),e=this.titleFilter?o.filter((function(o){return-1!==o.title.toLowerCase().indexOf(t.titleFilter.toLowerCase())})):o;return e},commonTodos:function(){return this.filteredTodos.filter((function(t){return!t.groupId}))}},methods:{handleAdding:function(){this.addTodo(this.newTodo)},addTodo:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;""!==t.trim()&&(this.todoList.todos.push({id:this.todoList.todos.length+1,title:t,groupId:o,completed:!1}),this.newTodo="")},removeTodo:function(t){this.todoList.todos=this.todoList.todos.filter((function(o){return o.id!==t}))},toggleTodoStatus:function(t,o){var e=this.todoList.todos.findIndex((function(o){return o.id===t}));if(!(e<0)){var n=this.todoList.todos[e];this.todoList.todos.splice(e,1,Object(a["a"])(Object(a["a"])({},n),{},{completed:o}))}},addGroup:function(){""!==this.newGroup.trim()&&(this.todoList.groups.push({id:this.todoList.groups.length+1,title:this.newGroup,color:this.getRandomColor()}),this.newGroup="")},removeGroup:function(t){var o=this.todoList.todos.filter((function(o){return o.groupId===t})),e=o.map((function(t){return t.id}));this.todoList.todos=this.todoList.todos.filter((function(t){return!e.includes(t.id)})),this.todoList.groups=this.todoList.groups.filter((function(o){return o.id!==t}))},changeGroup:function(t,o){var e=this.todoList.todos.findIndex((function(o){return o.id===t}));if(!(e<0)){var n=this.todoList.todos[e];this.todoList.todos.splice(e,1,Object(a["a"])(Object(a["a"])({},n),{},{groupId:o}))}},drop:function(t){var o=t.dataTransfer.getData("text");N.$emit("todo-group-changed",{todoId:+o,groupId:null})},getRandomColor:function(){var t=Math.floor(16777215*Math.random()).toString(16);return"#".concat(t)}},created:function(){var t=this;N.$on("todo-removed",(function(o){return t.removeTodo(o)})),N.$on("todo-complete-toggled",(function(o){var e=o.id,n=o.completed;return t.toggleTodoStatus(e,n)})),N.$on("grouped-todo-added",(function(o){var e=o.title,n=o.groupId;return t.addTodo(e,n)})),N.$on("group-removed",(function(o){return t.removeGroup(o)})),N.$on("todo-group-changed",(function(o){var e=o.todoId,n=o.groupId;return t.changeGroup(e,n)}))}},$=M,S=(e("ed30"),Object(v["a"])($,d,s,!1,null,null,null)),F=S.exports,P={name:"App",components:{TodoList:F}},A=P,E=(e("034f"),Object(v["a"])(A,r,i,!1,null,null,null)),D=E.exports;n["a"].config.productionTip=!1;var N=new n["a"];new n["a"]({render:function(t){return t(D)}}).$mount("#app")},"58b0":function(t,o,e){},"6c43":function(t,o,e){},8460:function(t,o,e){},"85ec":function(t,o,e){},"89d2":function(t,o,e){},bc58:function(t,o,e){"use strict";var n=e("58b0"),r=e.n(n);r.a},c7b9:function(t,o,e){"use strict";var n=e("8460"),r=e.n(n);r.a},ed30:function(t,o,e){"use strict";var n=e("89d2"),r=e.n(n);r.a}});
//# sourceMappingURL=app.aee84492.js.map